{"ast":null,"code":"import { AsyncAction } from './AsyncAction';\nexport class AnimationFrameAction extends AsyncAction {\n  constructor(scheduler, work) {\n    super(scheduler, work);\n    this.scheduler = scheduler;\n    this.work = work;\n  }\n\n  requestAsyncId(scheduler, id, delay = 0) {\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n\n    scheduler.actions.push(this);\n    return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(() => scheduler.flush(null)));\n  }\n\n  recycleAsyncId(scheduler, id, delay = 0) {\n    if (delay !== null && delay > 0 || delay === null && this.delay > 0) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n\n    if (scheduler.actions.length === 0) {\n      cancelAnimationFrame(id);\n      scheduler.scheduled = undefined;\n    }\n\n    return undefined;\n  }\n\n}","map":{"version":3,"sources":["../../../src/internal/scheduler/AnimationFrameAction.ts"],"names":[],"mappings":"AAAA,SAAS,WAAT,QAA4B,eAA5B;AASA,OAAM,MAAO,oBAAP,SAAuC,WAAvC,CAAqD;AAEzD,EAAA,WAAA,CAAsB,SAAtB,EACsB,IADtB,EACyE;AACvE,UAAM,SAAN,EAAiB,IAAjB;AAFoB,SAAA,SAAA,GAAA,SAAA;AACA,SAAA,IAAA,GAAA,IAAA;AAErB;;AAES,EAAA,cAAc,CAAC,SAAD,EAAqC,EAArC,EAA+C,KAAA,GAAgB,CAA/D,EAAgE;AAEtF,QAAI,KAAK,KAAK,IAAV,IAAkB,KAAK,GAAG,CAA9B,EAAiC;AAC/B,aAAO,MAAM,cAAN,CAAqB,SAArB,EAAgC,EAAhC,EAAoC,KAApC,CAAP;AACD;;AAED,IAAA,SAAS,CAAC,OAAV,CAAkB,IAAlB,CAAuB,IAAvB;AAIA,WAAO,SAAS,CAAC,SAAV,KAAwB,SAAS,CAAC,SAAV,GAAsB,qBAAqB,CACxE,MAAM,SAAS,CAAC,KAAV,CAAgB,IAAhB,CADkE,CAAnE,CAAP;AAED;;AACS,EAAA,cAAc,CAAC,SAAD,EAAqC,EAArC,EAA+C,KAAA,GAAgB,CAA/D,EAAgE;AAItF,QAAK,KAAK,KAAK,IAAV,IAAkB,KAAK,GAAG,CAA3B,IAAkC,KAAK,KAAK,IAAV,IAAkB,KAAK,KAAL,GAAa,CAArE,EAAyE;AACvE,aAAO,MAAM,cAAN,CAAqB,SAArB,EAAgC,EAAhC,EAAoC,KAApC,CAAP;AACD;;AAID,QAAI,SAAS,CAAC,OAAV,CAAkB,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,MAAA,oBAAoB,CAAC,EAAD,CAApB;AACA,MAAA,SAAS,CAAC,SAAV,GAAsB,SAAtB;AACD;;AAED,WAAO,SAAP;AACD;;AApCwD","sourcesContent":["import { AsyncAction } from './AsyncAction';\nexport class AnimationFrameAction extends AsyncAction {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        if (delay !== null && delay > 0) {\n            return super.requestAsyncId(scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(() => scheduler.flush(null)));\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return super.recycleAsyncId(scheduler, id, delay);\n        }\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        return undefined;\n    }\n}\n//# sourceMappingURL=AnimationFrameAction.js.map"]},"metadata":{},"sourceType":"module"}