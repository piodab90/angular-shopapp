{"ast":null,"code":"import { Subject } from './Subject';\nimport { Subscription } from './Subscription';\nexport class AsyncSubject extends Subject {\n  constructor() {\n    super(...arguments);\n    this.value = null;\n    this.hasNext = false;\n    this.hasCompleted = false;\n  }\n\n  _subscribe(subscriber) {\n    if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.hasCompleted && this.hasNext) {\n      subscriber.next(this.value);\n      subscriber.complete();\n      return Subscription.EMPTY;\n    }\n\n    return super._subscribe(subscriber);\n  }\n\n  next(value) {\n    if (!this.hasCompleted) {\n      this.value = value;\n      this.hasNext = true;\n    }\n  }\n\n  error(error) {\n    if (!this.hasCompleted) {\n      super.error(error);\n    }\n  }\n\n  complete() {\n    this.hasCompleted = true;\n\n    if (this.hasNext) {\n      super.next(this.value);\n    }\n\n    super.complete();\n  }\n\n}","map":{"version":3,"sources":["../../src/internal/AsyncSubject.ts"],"names":[],"mappings":"AAAA,SAAS,OAAT,QAAwB,WAAxB;AAEA,SAAS,YAAT,QAA6B,gBAA7B;AAQA,OAAM,MAAO,YAAP,SAA+B,OAA/B,CAAyC;AAA/C,EAAA,WAAA,GAAA;;AACU,SAAA,KAAA,GAAW,IAAX;AACA,SAAA,OAAA,GAAmB,KAAnB;AACA,SAAA,YAAA,GAAwB,KAAxB;AAmCT;;AAhCC,EAAA,UAAU,CAAC,UAAD,EAA4B;AACpC,QAAI,KAAK,QAAT,EAAmB;AACjB,MAAA,UAAU,CAAC,KAAX,CAAiB,KAAK,WAAtB;AACA,aAAO,YAAY,CAAC,KAApB;AACD,KAHD,MAGO,IAAI,KAAK,YAAL,IAAqB,KAAK,OAA9B,EAAuC;AAC5C,MAAA,UAAU,CAAC,IAAX,CAAgB,KAAK,KAArB;AACA,MAAA,UAAU,CAAC,QAAX;AACA,aAAO,YAAY,CAAC,KAApB;AACD;;AACD,WAAO,MAAM,UAAN,CAAiB,UAAjB,CAAP;AACD;;AAED,EAAA,IAAI,CAAC,KAAD,EAAS;AACX,QAAI,CAAC,KAAK,YAAV,EAAwB;AACtB,WAAK,KAAL,GAAa,KAAb;AACA,WAAK,OAAL,GAAe,IAAf;AACD;AACF;;AAED,EAAA,KAAK,CAAC,KAAD,EAAW;AACd,QAAI,CAAC,KAAK,YAAV,EAAwB;AACtB,YAAM,KAAN,CAAY,KAAZ;AACD;AACF;;AAED,EAAA,QAAQ,GAAA;AACN,SAAK,YAAL,GAAoB,IAApB;;AACA,QAAI,KAAK,OAAT,EAAkB;AAChB,YAAM,IAAN,CAAW,KAAK,KAAhB;AACD;;AACD,UAAM,QAAN;AACD;;AArC4C","sourcesContent":["import { Subject } from './Subject';\nimport { Subscription } from './Subscription';\nexport class AsyncSubject extends Subject {\n    constructor() {\n        super(...arguments);\n        this.value = null;\n        this.hasNext = false;\n        this.hasCompleted = false;\n    }\n    _subscribe(subscriber) {\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.hasCompleted && this.hasNext) {\n            subscriber.next(this.value);\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        return super._subscribe(subscriber);\n    }\n    next(value) {\n        if (!this.hasCompleted) {\n            this.value = value;\n            this.hasNext = true;\n        }\n    }\n    error(error) {\n        if (!this.hasCompleted) {\n            super.error(error);\n        }\n    }\n    complete() {\n        this.hasCompleted = true;\n        if (this.hasNext) {\n            super.next(this.value);\n        }\n        super.complete();\n    }\n}\n//# sourceMappingURL=AsyncSubject.js.map"]},"metadata":{},"sourceType":"module"}